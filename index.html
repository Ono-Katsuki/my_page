<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ユーザー操作によるリンク付きパーティクルロゴ</title>
    <style>
        body { margin: 0; overflow: hidden; background-color: #000; color: white; font-family: Arial, sans-serif; }
        canvas { display: block; }
        #ui { position: absolute; top: 10px; left: 10px; }
        #link { display: none; color: #4267B2; text-decoration: underline; cursor: pointer; }
    </style>
</head>
<body>
    <div id="ui">
        <div id="debug">ロゴをクリックしてください</div>
        <a id="link" target="_blank">リンクを開く</a>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer;
        let logo;
        let currentLogo = 0; // 0: F, 1: X
        const links = [
            'https://www.facebook.com/katsuki.hirai',
            'https://x.com/katsuki_o_h?s=21&t=FRRvt_E9oXOXMxkHwb2yhQ'
        ];

        function init() {
            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            createLogo();

            camera.position.z = 15;

            document.addEventListener('click', onDocumentClick);

            animate();
        }

        function createLogo() {
            const fPoints = [[-5, 5], [-3, 5], [-1, 5], [-5, 3], [-5, 1], [-5, -1], [-3, 1], [-1, 1], [-5, -3], [-5, -5]];
            const xPoints = [[1, 5], [3, 3], [5, 1], [1, 1], [3, -1], [5, -5], [5, 5], [3, 3], [1, 1], [5, -5]];
            
            logo = new THREE.Group();
            fPoints.forEach(([x, y]) => {
                const geometry = new THREE.SphereGeometry(0.2, 32, 32);
                const material = new THREE.MeshBasicMaterial({ color: 0x4267B2 });
                const particle = new THREE.Mesh(geometry, material);
                particle.position.set(x, y, 0);
                logo.add(particle);
            });
            scene.add(logo);
        }

        function onDocumentClick(event) {
            event.preventDefault();
            console.log('ロゴがクリックされました');
            document.getElementById('debug').textContent = 'クリック検出: ' + new Date().toLocaleTimeString();
            
            // ロゴの色を変更（視覚的フィードバック）
            logo.children.forEach(particle => {
                particle.material.color.setHex(Math.random() * 0xFFFFFF);
            });

            // リンクを表示
            const linkElement = document.getElementById('link');
            linkElement.href = links[currentLogo];
            linkElement.textContent = currentLogo === 0 ? 'Facebookを開く' : 'Xを開く';
            linkElement.style.display = 'block';

            // ロゴを切り替え
            currentLogo = 1 - currentLogo;
        }

        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }

        init();
    </script>
</body>
</html>
